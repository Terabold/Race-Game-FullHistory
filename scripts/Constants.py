import numpy as np
import pygame

pygame.init()
info = pygame.display.Info()

# Display settings
REFERENCE_SIZE = (1920, 1080)
screen_width, screen_height = info.current_w, info.current_h
aspect_x = screen_width - (screen_width % 16)
aspect_y = screen_height - (screen_height % 9)
DISPLAY_SIZE = (aspect_x, aspect_y)
FPS = 60
WIDTH, HEIGHT = 1600, 900
MENUWIDTH, MENUHEIGHT = 1280, 720

# Colors
GOLD = (255, 215, 0)
GREEN = (0, 255, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
DODGERBLUE = (30, 144, 255)
DARKGREEN = (0, 200, 0)
BLACK = (0, 0, 0)
GRAY = (128, 128, 128)
YELLOW = (255, 255, 0)
DARKGRAY = (20, 20, 20)
ORANGE = (255, 165, 0)

#checkpoint colors
BRIGHT_GREEN = (0, 255, 0)
DARK_GREEN = (0, 100, 0)  
GRAY_COLOR = (100, 100, 100)

# Car colors mapping
CAR_COLORS = {
    "Red": r"data\photo\car-red.png",
    "Blue": r"data\photo/car-blue.png",
    "Black": r"data\photo/car-black.png",
    "Yellow": r"data\photo/car-yellow.png",
    "White": r"data\photo/car-white.png",
}

# Game settings - START POSITIONS
CAR_START_POS = (350, 225)  # Default single player start

# NEW: Fair two-player start positions (equidistant to first checkpoint)
CAR1_FAIR_START = (330, 219)  # Player 1 (left)
CAR2_FAIR_START = (363, 180)  # Player 2 (right)

FINISHLINE_POS = np.array([268, 250])
FINISHLINE_SIZE = (162, 25)
TARGET_TIME = 25.0

# Physics constants
MAXSPEED = 6.0
ROTATESPEED = 5.0
ACCELERATION = 0.12

# Asset paths
TRACK_BORDER = r"data\photo\track1-border.png"
TRACK_BORDER_TRAIN = r"data\photo\track1-border-train.png"
TRACK = r"data\photo\trackv3.png"
BOMB = r'data\photo\bomb.png'
FINISHLINE = r'data\photo/finish.png'
GRASS = r'data\photo\grass2.jpg'
MENU = r'data\photo\Background.jpg'
RECT = r'data\photo\Rect.png'
MENUBG = r'data\photo\Background.jpg'

# Fonts
FONT = r'data\fonts\Menu.ttf'
COUNTDOWN_FONT = r'data\fonts\CountDownFont.otf'
MENUFONT = r'data\fonts\Menu.ttf'

# Sound paths
WIN_SOUND = r'data\sound/victory.wav'
COUNTDOWN_SOUND = r'data\sound/countdown.mp3'
BACKGROUND_MUSIC = r'data\sound/background_music.mp3'
COLLIDE_SOUND = r'data\sound/collide.mp3'
CHECKPOINT_SOUND = r'data\sound\CHECKPOINT_SOUND.mp3'
OBSTACLE_SOUND = r'data\sound\obstacle_sound.mp3'

# Sound/UI settings
SOUND_EXTENSIONS = ('.mp3', '.wav', '.ogg')
DEFAULT_REMOVE_COLOR = (0, 0, 0)
DEFAULT_SOUND_VOLUME = 0.05
DEFAULT_HOVER_VOLUME = 0.01
DEFAULT_CLICK_VOLUME = 0.05

TRACK_CHECKPOINT_ZONES = [
    [(236, 134), (236, 43)],  # CP 1 | ΔN/Apx
    [(204, 172), (41, 179)],  # CP 2 | Δ143px
    [(239, 536), (159, 616)],  # CP 3 | Δ407px
    [(722, 737), (885, 736)],  # CP 4 | Δ625px
    [(1002, 487), (1000, 580)],  # CP 5 | Δ284px
    [(1105, 682), (1267, 688)],  # CP 6 | Δ239px
    [(1331, 767), (1332, 857)],  # CP 7 | Δ193px
    [(1380, 679), (1543, 675)],  # CP 8 | Δ187px
    [(1283, 361), (1284, 451)],  # CP 9 | Δ325px
    [(877, 348), (716, 348)],  # CP 10 | Δ491px
    [(933, 247), (924, 337)],  # CP 11 | Δ143px
    [(1380, 203), (1541, 202)],  # CP 12 | Δ539px
    [(1295, 133), (1301, 45)],  # CP 13 | Δ198px
    [(476, 196), (636, 191)],  # CP 14 | Δ750px
    [(452, 410), (453, 503)],  # CP 15 | Δ283px
    [(270, 373), (431, 374)],  # CP 16 | Δ132px
]

BOMB_LIST = [
    (296, 119),
    (359, 120),
    (340, 93),
    (278, 78),
    (245, 64),
    (226, 103),
    (172, 82),
    (149, 133),
    (99, 140),
    (67, 153),
    (135, 197),
    (176, 190),
    (107, 249),
    (65, 266),
    (102, 238),
    (144, 329),
    (77, 326),
    (68, 340),
    (116, 396),
    (193, 429),
    (123, 441),
    (98, 495),
    (123, 542),
    (166, 547),
    (197, 543),
    (196, 614),
    (235, 584),
    (267, 605),
    (315, 625),
    (331, 671),
    (358, 652),
    (372, 692),
    (428, 683),
    (442, 729),
    (465, 707),
    (493, 758),
    (528, 736),
    (517, 778),
    (403, 720),
    (558, 763),
    (590, 809),
    (585, 819),
    (660, 810),
    (696, 827),
    (744, 786),
    (816, 792),
    (839, 755),
    (838, 743),
    (822, 682),
    (829, 650),
    (795, 606),
    (843, 570),
    (903, 558),
    (909, 576),
    (956, 536),
    (1004, 526),
    (1033, 554),
    (1099, 544),
    (1136, 566),
    (1183, 596),
    (1188, 609),
    (1205, 618),
    (1153, 660),
    (1164, 703),
    (1202, 741),
    (1227, 778),
    (1220, 805),
    (1274, 824),
    (1380, 798),
    (1408, 800),
    (1430, 793),
    (1465, 754),
    (1472, 739),
    (1431, 723),
    (1434, 702),
    (1447, 677),
    (1490, 660),
    (1501, 658),
    (1485, 646),
    (1428, 601),
    (1463, 563),
    (1473, 558),
    (1484, 540),
    (1486, 521),
    (1422, 460),
    (1473, 447),
    (1442, 423),
    (1356, 402),
    (1246, 380),
    (984, 386),
    (800, 290),
    (995, 275),
    (1029, 308),
    (1071, 280),
    (1102, 284),
    (1250, 313),
    (1286, 280),
    (1212, 313),
    (1362, 309),
    (1448, 281),
    (1487, 250),
    (1506, 207),
    (1417, 260),
    (1436, 186),
    (1508, 125),
    (1434, 113),
    (1479, 169),
    (1405, 109),
    (1403, 81),
    (1313, 101),
    (1284, 61),
    (1244, 109),
    (1208, 63),
    (1168, 98),
    (1130, 63),
    (1077, 101),
    (1055, 70),
    (1013, 99),
    (980, 82),
    (933, 94),
    (897, 79),
    (863, 95),
    (831, 60),
    (797, 102),
    (769, 78),
    (717, 94),
    (682, 62),
    (659, 96),
    (626, 106),
    (601, 89),
    (552, 129),
    (585, 158),
    (519, 191),
    (579, 206),
    (559, 264),
    (522, 295),
    (610, 308),
    (523, 358),
    (585, 366),
    (535, 393),
    (565, 426),
    (408, 465),
    (344, 457),
    (305, 396),
    (463, 484),
    (575, 456),
    (298, 424),
    (293, 336),
    (64, 452),
    (102, 349),
    (96, 556),
    (180, 478),
    (97, 192),
    (118, 88),
    (61, 202),
    (282, 652),
    (158, 588),
    (652, 836),
    (752, 636),
    (851, 529),
    (868, 604),
    (1070, 513),
    (925, 509),
    (1145, 530),
    (1169, 776),
    (1487, 789),
    (1518, 682),
    (1525, 566),
    (1513, 472),
    (1317, 830),
    (1246, 812),
    (1141, 746),
    (1131, 660),
    (1468, 611),
    (1474, 407),
    (1442, 520),
    (1462, 485),
    (1416, 391),
    (1372, 381),
    (1300, 376),
    (1205, 379),
    (1092, 381),
    (1022, 379),
    (822, 272),
    (759, 306),
    (731, 353),
    (752, 388),
    (1160, 383),
    (1066, 385),
    (1331, 391),
    (1276, 401),
    (1336, 445),
    (1141, 445),
    (1246, 441),
    (871, 262),
    (955, 264),
    (1041, 275),
    (1143, 325),
    (1333, 328),
    (1404, 318),
    (1523, 237),
    (1289, 324),
    (1446, 222),
    (1517, 160),
    (1467, 90),
    (1363, 56),
    (1155, 257),
    (1237, 257),
    (1323, 302),
    (1337, 60),
    (1257, 84),
    (1171, 61),
    (1088, 71),
    (964, 57),
    (875, 58),
    (806, 79),
    (732, 59),
    (563, 78),
    (509, 142),
    (546, 172),
    (596, 266),
    (558, 320),
    (595, 404),
    (544, 227),
    (419, 396),
    (327, 369),
    (337, 408),
    (296, 368),
    (413, 335),
    (406, 370),
    (784, 381),
    (795, 322),
    (763, 334),
    (108, 282),
    (77, 410),
    (164, 411),
    (141, 223),
    (188, 276),
    (138, 265),
    (240, 634),
    (479, 781),
    (789, 751),
    (710, 121),
    (191, 117),
    (208, 82),
    (403, 117),
    (311, 74),
    (763, 357),
    (848, 264),
    (907, 256),
    (960, 295),
    (365, 465),
    (530, 471),
    (72, 519),
    (186, 341),
    (623, 380),
    (488, 186),
    (534, 101),
    (635, 58),
    (1023, 55),
    (571, 101),
    (1038, 124),
    (896, 120),
    (751, 123),
    (1056, 442),
    (1203, 406),
    (1110, 420),
    (1498, 278),
    (1477, 114),
    (1428, 65),
    (1361, 75),
    (1238, 61),
    (923, 61),
    (1512, 618),
    (1514, 514),
    (1494, 435),
    (1508, 755),
    (1414, 832),
    (1203, 823),
    (992, 504),
    (890, 513),
    (779, 571),
    (736, 674),
    (1204, 569),
    (1131, 703),
    (1150, 785),
    (785, 812),
    (528, 802),
    (329, 694),
    (83, 111),
    (374, 94),
    (194, 57),
    (79, 226),
    (79, 385),
    (91, 453),
    (140, 522),
    (109, 166),
    (776, 55),
    (1451, 304),
    (1174, 290),
    (1376, 286),
    (937, 258),
    (793, 277),
    (979, 256),
    (777, 294),
    (739, 326),
    (964, 375),
    (936, 371),
    (927, 381),
    (1043, 398),
    (959, 395),
    (1167, 740),
    (732, 824),
    (811, 551),
    (511, 110),
    (605, 71),
    (252, 82),
    (132, 107),
    (68, 292),
    (105, 310),
    (180, 377),
    (128, 474),
    (173, 507),
    (862, 275),
    (758, 598),
    (195, 580),
    (125, 568),
    (67, 482),
    (1373, 830),
    (1447, 812),
    (1503, 715),
    (1492, 580),
    (1114, 80),
    (1221, 82),
    (1310, 64),
    (429, 481),
    (596, 331),
    (532, 128),
    (498, 479)
]